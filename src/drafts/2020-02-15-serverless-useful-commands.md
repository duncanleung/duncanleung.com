---
date: 2020-02-15
title: Serverless Notes
template: post
thumbnail: "../thumbnails/serverless.png"
slug: serverless-notes
categories:
  - Serverless
tags:
  - serverless
  - aws-lambda
  - aws-api-gateway
  - aws-iam
---

## Create Serverless

```terminal
sls create -t aws-nodejs
```

## Commands

```terminal
$ sls package
```

### Invoke remotely

The same function name as in `serverless.yml`

```yml{10}
service: serverless-workshop

provider:
  name: aws
  runtime: nodejs12.x
  environment:
    STAGE: dev

functions:
  hello:
    handler: handler.hello
    environment:
      FOO: BAR
    events:
      - http:
          path: /
          method: get
```

pass in data

```terminal
$ serverless invoke -f hello -d '{"foo": "bar"}'
```

### View most recent logs

```terminal
$ serverless logs -f hello
```

### Deploy

Deploys using cloudformation

There are two `cloudformation-template...json`

`cloudformation-template-create-stack.json`
Creates the S3 bucket - uploads the packed up artifacts generated by Serverless framework

`cloudformation-template-update-stack.json`
Updates CloudFormation stack and provisions the functions

```terminal
$ serverless deploy
```

Deploy just one function
Use lambda API to update function code instead of CloudFormation

```terminal
$ serverless deploy -f hello
```

Deploy to specific sage or region

```yml{6,7}
service: serverless-workshop

provider:
  name: aws
  runtime: nodejs12.x
  stage: dev
  region: us-east-1

functions:
  hello:
    handler: handler.hello
    events:
      - http:
          path: /
          method: get
```

`-s`: stage
`-r`: region

```terminal
$ serverless deploy -s staging -r eu-west-1
```

### Remove

```terminal
$ serverless remove -s staging -r eu-west-1
```
